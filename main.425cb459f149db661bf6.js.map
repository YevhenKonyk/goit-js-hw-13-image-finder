{"version":3,"sources":["webpack:///./js/services/apiService.js","webpack:///./js/plugins/loader.js","webpack:///./index.js","webpack:///./templates/gallery-list-item.hbs"],"names":["page","query","per_page","fetchImages","requestParams","this","fetch","then","response","json","parsedResponse","incrementPage","hits","value","encodeURIComponent","resetPage","loader","element","document","querySelector","showLoader","classList","remove","hideLoader","add","refs","searchForm","imagesList","loadMoreBtn","apiService","images","markup","map","image","galleryListItemTpl","join","insertAdjacentHTML","renderImagesList","reduce","tags","split","push","generateImageTags","catch","error","console","warn","message","addEventListener","e","preventDefault","innerHTML","currentTarget","elements","trim","length","Handlebars","module","exports","template","container","depth0","helpers","partials","data","escapeExpression","lambda","stack1","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","webformatURL","call","largeImageURL","likes","views","comments","downloads","each","program","noop"],"mappings":"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","file":"main.425cb459f149db661bf6.js","sourcesContent":["// import { request } from \"http\";\r\n\r\nconst baseUrl = 'https://pixabay.com/api/';\r\nconst API_KEY = '14348648-b031b318d2a0c2c3bc8ffa9be';\r\n\r\n// Модель\r\nexport default {\r\n    page: 1,\r\n    query: '',\r\n    per_page: 6,\r\n\r\n    fetchImages() {\r\n        const requestParams = `?q=${this.query}&page=${this.page}&per_page=${this.per_page}&image_type=photo&orientation=horizontal&key=${API_KEY}`;\r\n       \r\n        // Возвращаем промис содержащий parsedResponse.hits\r\n        return fetch(baseUrl + requestParams)\r\n            .then(response => response.json())\r\n            .then(parsedResponse => {\r\n                this.incrementPage();\r\n                \r\n                return parsedResponse.hits;\r\n            });\r\n    },\r\n    \r\n    get searchQuery() {\r\n        return this.query;\r\n    },\r\n\r\n    set searchQuery(value) {\r\n        this.query = encodeURIComponent(value);\r\n    },\r\n\r\n    incrementPage() {\r\n        this.page += 1;\r\n    },\r\n\r\n    resetPage() {\r\n        this.page = 1;\r\n    },\r\n\r\n    get pageSize() {\r\n        return this.per_page;\r\n    },\r\n\r\n    set pageSize(value) {\r\n        this.per_page = value;\r\n    },\r\n};","const loader = {\r\n    element: document.querySelector('.loader-overlay'),\r\n    showLoader() {\r\n        this.element.classList.remove('js-hide');\r\n    },\r\n    hideLoader() {\r\n        this.element.classList.add('js-hide');\r\n    }\r\n}\r\n\r\nexport default loader;","import './styles.css';\nimport './css/loader.css';\nimport './css/image_finder.css'\n\n// Templates\nimport galleryListItemTpl from './templates/gallery-list-item.hbs';\n\n// API\nimport apiService from './js/services/apiService.js';\n\n// Plugins\nimport loader from './js/plugins/loader.js';\n\nconst refs = {\n    searchForm: document.querySelector('#search-form'),\n    imagesList: document.querySelector('#gallery'),\n    loadMoreBtn: document.querySelector('button[data-action=\"load-more\"]'),\n}\n// Event Listeners\nrefs.searchForm.addEventListener('submit', searchFormSubmitHandler);\nrefs.loadMoreBtn.addEventListener('click', loadMoreBtnClickHandler);\n\n// Handlers\nfunction searchFormSubmitHandler(e) {\n    e.preventDefault();\n\n    clearImagesList();\n\n    const searchForm = e.currentTarget;\n\n    const query = searchForm.elements.query.value;\n\n    if (query.trim().length === 0) {\n        // TODO: show notification, input shouldnt be empty\n        return;\n    }\n\n    apiService.query = encodeURIComponent(query);\n    \n    fetchImages();\n};\n\nfunction loadMoreBtnClickHandler() {\n    fetchImages();\n};\n\nfunction fetchImages() {\n    loader.showLoader();\n    apiService.fetchImages().then(images => {\n        const imagesWithTags = generateImageTags(images);\n        \n        renderImagesList(imagesWithTags);\n\n        refs.loadMoreBtn.classList.remove('js-hide');\n\n        loader.hideLoader();\n    }).catch(error => console.warn(error.message));\n};\n\nfunction renderImagesList(images) {\n    const markup = images.map( image => galleryListItemTpl(image)).join('');\n    refs.imagesList.insertAdjacentHTML('beforeend', markup);\n};\n\nfunction clearImagesList() {\n    refs.imagesList.innerHTML = '';\n    refs.loadMoreBtn.classList.add('js-hide');\n    apiService.resetPage();\n};\n\nfunction generateImageTags(images) {\n    return images.reduce( (images, image) => {\n        image.tags = image.tags.split(',');\n        images.push(image);\n        return images;\n    }, []);\n}","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \"            <li class=\\\"tags-item\\\">\"\n    + container.escapeExpression(container.lambda(depth0, depth0))\n    + \"</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery_item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":18},\"end\":{\"line\":3,\"column\":34}}}) : helper)))\n    + \"\\\" data-full-image=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":53},\"end\":{\"line\":3,\"column\":70}}}) : helper)))\n    + \"\\\"\\r\\n            alt=\\\"image\\\" width=\\\"400\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n        <ul class=\\\"tags\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.tags : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":25,\"column\":12},\"end\":{\"line\":27,\"column\":21}}})) != null ? stack1 : \"\")\n    + \"        </ul>\\r\\n    </div>\\r\\n</li>\\r\\n\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}